## WebRTC 如何避免拥塞？

### 1. WebRTC 网络传输背景

#### 1.1. WebRTC && 多数直播

**大多数视频直播平台**

| item | remark                                                                  |
|:---- |:----------------------------------------------------------------------- |
| 传输协议 | RTMP（Real Time MEssaging Protocol)                                      |
| 优点   | 使用RTMP， 其基于TCP传输，跟flash等流媒体服务支持比较好，同时CDN支持良好                            |
| 缺点   | 直播音视频数据量大，实时性要求比较高，TCP的重传机制和拥塞机制不适用于实时传输。传输控制依赖于TCP本身协议控制机制，网络成本较大不够灵活。 |

音视频对网络丢包有一定成都天然容忍性（常见优酷，爱奇艺都有缓冲）。使用UDP传输是不错到选择。

**webRTC**

| item | remark                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|:---- |:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 传输协议 | RTP: 针对流媒体传输的基础协议，定义Internet上传输音视频数据包。 <br> RTCP：负责流媒体到传输质量保证，提供流量控制和拥塞控制等机制。![](https://gss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=57e79b5fb0de9c82b268f1dd0de8eb6f/4bed2e738bd4b31c42beebdd84d6277f9f2ff8d2.jpg)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 优点   | 包括ICE、STUN、TURN等信令交互、网络大洞（P2P)，主流浏览器支持（chrome![](https://gss2.bdstatic.com/-fo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=54395c9081d4b31cf03c93bdbfed4042/2cf5e0fe9925bc3142b4464b54df8db1ca137073.jpg), firefox![](https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=bb31c6af3812b31bc36cca2bb61a3674/54fbb2fb43166d2287f64f7c472309f79152d251.jpg), opera![](https://gss0.bdstatic.com/-4o3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=1db5f93247c2d562f208d7ebdf2af7d2/f9198618367adab4ee604c1183d4b31c8701e434.jpg), safari![](https://gss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=5838ca994410b912bfc1f1f8fbc69b3e/500fd9f9d72a6059b0046c382b34349b033bbaf8.jpg), edge![](https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268%3Bg%3D0/sign=37f66727093387449cc5287a6934bec4/d53f8794a4c27d1e13c902b31ed5ad6edcc438dd.jpg)等) |
|      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

~~~~



### WebRTC 处理

### NACK

#### 前向纠错编码( FEC )

FEC（Forward Error Correction，前向纠错码），通过增加冗余来增强容错性到一种方法。如果没有FEC，接受端发现丢包时，需要通过发送NACK 来发起重传，但重传会影响延时性。

- FEC则是在发送端增加冗余数据，接受端在数据丢失到情况下可以重建丢失的数据。

- 增加FEC冗余数据占据落有效带宽，



#### 抖动Buf( Jitterbuffer )

#### 带宽自适应

~~~~

### 参考资源:

[webrtc 中到网络反馈于控制](https://blog.csdn.net/mantis_1984/article/details/53572822)

[WebRTC视频JitterBuff](https://blog.csdn.net/u012635648/article/details/72953237)








